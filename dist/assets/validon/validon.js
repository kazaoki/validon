"use strict";var __validonUrlPath=(document.currentScript?document.currentScript.src:document.getElementsByTagName("script")[document.getElementsByTagName("script").length-1].src).replace(new RegExp("^"+location.origin),"").replace(/[^\/]+$/,"");function Validon(e){var o=this;o.form=e.form,o.config=e.config,o.eachfire=e.eachfire||!1,o.errortag=e.errortag||'<div class="error">$message</div>',o.position=e.position||"append",o.beforeFunc=e.beforeFunc,o.afterFunc=e.afterFunc,o.urlPath=__validonUrlPath;var t=window.onload||function(){if(o.form=document.querySelector(o.form),!o.form)return console.warn("Validon can not set up. Please set exists form query."),!1;if(!o.config)return console.warn("Validon can not set up. Please set config."),!1;if(o.form.addEventListener?o.form.addEventListener("submit",function(e){event.preventDefault?event.preventDefault():event.returnValue=!1,o.validon()},!1):o.form.attachEvent&&o.form.attachEvent("onsubmit",function(e){event.preventDefault?event.preventDefault():event.returnValue=!1,o.validon()}),o.eachfire)for(var e=o.form.querySelectorAll("[name]"),t=0;t<e.length;t++)e[t].getAttribute("data-validon-on")||("radio"===e[t].type||"checkbox"===e[t].type||"SELECT"===e[t].tagName?e[t].setAttribute("data-validon-on","change"):e[t].setAttribute("data-validon-on","blur"));for(e=o.form.querySelectorAll("[data-validon-on]"),t=0;t<e.length;t++){var n=e[t],r=n.getAttribute("data-validon-on");n.addEventListener?n.addEventListener(r,function(e){o.validon(this.name)},!1):n.attachEvent&&n.attachEvent("on"+r,function(e){o.validon(e.srcElement.name)})}};window.onload=function(){t()}}Validon.prototype={validon:function(e){var t=this,n={config:this.config,target:[]};if(void 0===e)for(var r=t.form.querySelectorAll("[name]"),o=0;o<r.length;o++)n.target.push(r[o].name);else if("string"==typeof e)n.target.push(e);else if(e instanceof Array)for(o=0;o<e.length;o++)n.target.push(e[o]);n.target=n.target.filter(function(e,t,n){return n.indexOf(e)===t}),t.beforeFunc&&t.beforeFunc(n);var a=new XMLHttpRequest;return a.onreadystatechange=function(){4===this.readyState&&200===this.status&&(n=this.response,void 0===this.response&&(n=JSON.parse(this.responseText)),t.beforeFunc&&t.afterFunc(n))},a.open("POST",t.urlPath+"validon.php"),a.setRequestHeader("Content-Type","application/json"),a.responseType="json",a.send(JSON.stringify(n)),this}},Array.prototype.filter||(Array.prototype.filter=function(e,t){if("Function"!=typeof e&&"function"!=typeof e||!this)throw new TypeError;var n=this.length>>>0,r=new Array(n),o=this,a=0,i=-1;if(void 0===t)for(;++i!==n;)i in this&&e(o[i],i,o)&&(r[a++]=o[i]);else for(;++i!==n;)i in this&&e.call(t,o[i],i,o)&&(r[a++]=o[i]);return r.length=a,r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,i,f){return function(e,t){if(null==this)throw TypeError("Array.prototype.indexOf called on null or undefined");var n=a(this),r=n.length>>>0,o=f(0|t,r);if(o<0)o=i(0,r+o);else if(r<=o)return-1;if(void 0===e){for(;o!==r;++o)if(void 0===n[o]&&o in n)return o}else if(e!=e){for(;o!==r;++o)if(n[o]!=n[o])return o}else for(;o!==r;++o)if(n[o]===e)return o;return-1}}(Object,Math.max,Math.min)),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){if(null==this)throw new TypeError;var t,n,r=Object(this),o=r.length>>>0;if(0===o)return-1;for(t=o-1,1<arguments.length&&((t=Number(arguments[1]))!=t?t=0:0!=t&&t!=1/0&&t!=-1/0&&(t=(0<t||-1)*Math.floor(Math.abs(t)))),n=0<=t?Math.min(t,o-1):o-Math.abs(t);0<=n;n--)if(n in r&&r[n]===e)return n;return-1});
//# sourceMappingURL=validon.js.map
