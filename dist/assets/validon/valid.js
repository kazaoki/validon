"use strict";var __validonUrlPath=(document.currentScript?document.currentScript.src:document.getElementsByTagName("script")[document.getElementsByTagName("script").length-1].src).replace(new RegExp("^"+location.origin),"").replace(/[^\/]+$/,"");function Validon(e){var o=this;o.form=e.form,o.config=e.config,o.eachfire=e.eachfire||!1,o.errortag=e.errortag||'<div class="error">$message</div>',o.position=e.position||"append",o.beforeFunc=e.beforeFunc||"append",o.afterFunc=e.afterFunc||"append",o.urlPath=__validonUrlPath;var t=window.onload||function(){if(o.form=document.querySelector(o.form),!o.form)return console.warn("Validon can not set up. Please set exists form query."),!1;if(!o.config)return console.warn("Validon can not set up. Please set config."),!1;if(o.form.addEventListener?o.form.addEventListener("submit",function(e){event.preventDefault?event.preventDefault():event.returnValue=!1,o.validate()},!1):o.form.attachEvent&&o.form.attachEvent("onsubmit",function(e){event.preventDefault?event.preventDefault():event.returnValue=!1,o.validate()}),o.eachfire)for(var e=o.form.querySelectorAll("[name]"),t=0;t<e.length;t++)e[t].getAttribute("data-validon-on")||("radio"===e[t].type||"checkbox"===e[t].type||"SELECT"===e[t].tagName?e[t].setAttribute("data-validon-on","change"):e[t].setAttribute("data-validon-on","blur"));for(e=o.form.querySelectorAll("[data-validon-on]"),t=0;t<e.length;t++){var r=e[t],n=r.getAttribute("data-validon-on");r.addEventListener?r.addEventListener(n,function(e){o.validate(this.name)},!1):r.attachEvent&&r.attachEvent("on"+n,function(e){o.validate(e.srcElement.name)})}};window.onload=function(){t()}}Validon.prototype={validate:function(e){var t=this,r=[];if(r.target=[],void 0===e)for(var n=t.form.querySelectorAll("[name]"),o=0;o<n.length;o++)r.target.push(n[o].name);else if("string"==typeof e)r.target.push(e);else if(e instanceof Array)for(o=0;o<e.length;o++)r.target.push(e[o]);r.target=r.target.filter(function(e,t,r){return r.indexOf(e)===t}),t.beforeFunc&&t.beforeFunc(r);var a=new XMLHttpRequest;return a.onreadystatechange=function(){4===this.readyState&&200===this.status&&(console.log(this.responseText),t.beforeFunc&&t.afterFunc(r))},a.open("POST",t.urlPath+"valid.php"),a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(r)),this}},Array.prototype.filter||(Array.prototype.filter=function(e,t){if("Function"!=typeof e&&"function"!=typeof e||!this)throw new TypeError;var r=this.length>>>0,n=new Array(r),o=this,a=0,i=-1;if(void 0===t)for(;++i!==r;)i in this&&e(o[i],i,o)&&(n[a++]=o[i]);else for(;++i!==r;)i in this&&e.call(t,o[i],i,o)&&(n[a++]=o[i]);return n.length=a,n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,i,f){return function(e,t){if(null==this)throw TypeError("Array.prototype.indexOf called on null or undefined");var r=a(this),n=r.length>>>0,o=f(0|t,n);if(o<0)o=i(0,n+o);else if(n<=o)return-1;if(void 0===e){for(;o!==n;++o)if(void 0===r[o]&&o in r)return o}else if(e!=e){for(;o!==n;++o)if(r[o]!=r[o])return o}else for(;o!==n;++o)if(r[o]===e)return o;return-1}}(Object,Math.max,Math.min)),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){if(null==this)throw new TypeError;var t,r,n=Object(this),o=n.length>>>0;if(0===o)return-1;for(t=o-1,1<arguments.length&&((t=Number(arguments[1]))!=t?t=0:0!=t&&t!=1/0&&t!=-1/0&&(t=(0<t||-1)*Math.floor(Math.abs(t)))),r=0<=t?Math.min(t,o-1):o-Math.abs(t);0<=r;r--)if(r in n&&n[r]===e)return r;return-1});
//# sourceMappingURL=valid.js.map
