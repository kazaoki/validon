"use strict";var __validonUrlPath=(document.currentScript?document.currentScript.src:document.getElementsByTagName("script")[document.getElementsByTagName("script").length-1].src).replace(new RegExp("^"+location.origin),"").replace(/[^\/]+$/,"");function Validon(e){var a=this;a.form=e.form,a.config=e.config,a.eachfire=e.eachfire||!1,a.errortag=e.errortag||'<div class="error">$message</div>',a.position=e.position||"append",a.beforeFunc=e.beforeFunc,a.afterFunc=e.afterFunc,a.urlPath=__validonUrlPath;var t=window.onload||function(){if(a.form=document.querySelector(a.form),!a.form)return console.warn("Validon can not set up. Please set exists form query."),!1;if(!a.config)return console.warn("Validon can not set up. Please set config."),!1;var e=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,a.send()};if(a.form.addEventListener?a.form.addEventListener("submit",e,!1):a.form.attachEvent&&a.form.attachEvent("onsubmit",e),a.eachfire)for(var t=a.form.querySelectorAll("[name]"),r=0;r<t.length;r++)t[r].getAttribute("data-validon-on")||("radio"===t[r].type||"checkbox"===t[r].type||"SELECT"===t[r].tagName?t[r].setAttribute("data-validon-on","change"):t[r].setAttribute("data-validon-on","blur"));for(t=a.form.querySelectorAll("[data-validon-on]"),r=0;r<t.length;r++){var n=t[r],o=n.getAttribute("data-validon-on");n.addEventListener?n.addEventListener(o,function(e){a.send(this.name)},!1):n.attachEvent&&n.attachEvent("on"+o,function(e){a.send(e.srcElement.name)})}};window.onload=function(){t()}}Validon.prototype={send:function(e){for(var t=this,r={config:this.config,params:[]},n={},o=t.form.querySelectorAll("[name]"),a=0;a<o.length;a++){var i=o[a].getAttribute("name");if(void 0===n[i])if("radio"===o[a].type){var s=t.form.querySelectorAll('[name="'+i+'"]');for(a=0;a<s.length;a++)if(s[a].checked){n[i]=s[a].value;break}}else if("checkbox"===o[a].type){s=t.form.querySelectorAll('[name="'+i+'"]');for(n[i]=[],a=0;a<s.length;a++)s[a].checked&&n[i].push(s[a].value)}else if("SELECT"===o[a].tagName){s=t.form.querySelectorAll('[name="'+i+'"] option');for(n[i]=[],a=0;a<s.length;a++)s[a].selected&&n[i].push(s[a].value)}else n[i]=o[a].value}if(r.params=n,r.targets=[],r.isSubmit=!1,void 0===e)r.isSubmit=!0,r.targets=Object.keys(r.params);else if("string"==typeof e)r.targets.push(e);else if(e instanceof Array)for(a=0;a<e.length;a++)r.targets.push(e[a]);if(t.beforeFunc&&!1===t.beforeFunc(r))return!1;var c=new XMLHttpRequest;return c.onreadystatechange=function(){if(4===this.readyState&&200===this.status&&(r=this.response,void 0===this.response&&(r=JSON.parse(this.responseText)),!1===t.afterFunc(r)))return!1},c.open("POST",t.urlPath+"validon.php"),c.setRequestHeader("Content-Type","application/json"),c.responseType="json",c.send(JSON.stringify(r)),this}},Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r});
//# sourceMappingURL=validon.js.map
