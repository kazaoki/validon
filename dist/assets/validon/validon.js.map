{"version":3,"sources":["validon.js"],"names":["__validonUrlPath","document","currentScript","src","getElementsByTagName","length","replace","RegExp","location","origin","Validon","validon","eachfire","opt","errorposition","beforeFunc","afterFunc","finishFunc","errorgroup","urlPath","startFunc","windowOnload","window","onload","form","querySelector","console","warn","event","preventDefault","send","attachEvent","returnValue","elems","addEventListener","submitEvent","querySelectorAll","i","getAttribute","type","tagName","setAttribute","elem","e","srcElement","eventName","this","name","prototype","callback","json","config","params","elements","lump","checked","value","push","selected","isSubmit","targets","Object","keys","Array","xhr","onreadystatechange","readyState","response","status","JSON","parse","responseText","changes","j","options","indexOf","errorholder","parent","parentNode","toUpperCase","createElement","insertBefore","appendChild","message","errors","errortag","innerHTML","responseType","submit","open","setRequestHeader","stringify","o","TypeError","p","k","hasOwnProperty","call","max","min","Len","member","fromIndex","that","Math"],"mappings":"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","file":"validon.js","sourcesContent":["\n/**\n * set url path\n */\nvar __validonUrlPath = (\n\tdocument.currentScript\n\t\t? document.currentScript.src\n\t\t: document.getElementsByTagName('script')[document.getElementsByTagName('script').length-1].src\n\t)\n\t.replace(new RegExp('^'+location.origin), '')\n\t.replace(/[^\\/]+$/, '')\n;\n\n/**\n * コンストラクタ\n */\nfunction Validon(opt)\n{\n\tvar validon = this;\n\n\t// オプションセット\n\tvalidon.form          = opt.form\n\tvalidon.config        = opt.config\n\tvalidon.eachfire      = opt.eachfire || false\n\tvalidon.errorgroup    = opt.errorgroup || 'section'\n\tvalidon.errorposition = opt.errorposition || 'append'\n\tvalidon.errortag      = opt.errortag || '<div class=\"error\">$message</div>'\n\tvalidon.startFunc     = opt.startFunc  // 開始してすぐ\n\tvalidon.beforeFunc    = opt.beforeFunc // json送信直前\n\tvalidon.afterFunc     = opt.afterFunc  // json受信直後\n\tvalidon.finishFunc    = opt.finishFunc // 処理完了後\n\n\t// URLパス設定\n\tvalidon.urlPath = __validonUrlPath\n\n\t// オンロードセット\n\tvar windowOnload = window.onload || function () {\n\n\t\t// 設定チェック\n\t\tvalidon.form = document.querySelector(validon.form)\n\t\tif(!validon.form){\n\t\t\tconsole.warn('Validon can not set up. Please set exists form query.')\n\t\t\treturn false\n\t\t}\n\t\tif(!validon.config){\n\t\t\tconsole.warn('Validon can not set up. Please set config.')\n\t\t\treturn false\n\t\t}\n\n\t\t// submitイベント登録\n\t\tvar submitEvent = function(event){\n\t\t\t(event.preventDefault) ? event.preventDefault() : event.returnValue = false\n\t\t\tvalidon.send()\n\t\t}\n\t\tif (validon.form.addEventListener) {\n\t\t\tvalidon.form.addEventListener('submit', submitEvent, false)\n\t\t} else if (validon.form.attachEvent) {\n\t\t\tvalidon.form.attachEvent('onsubmit', submitEvent)\n\t\t}\n\n\t\t// 要素ごとのイベント発火の標準設定（ラジオ、チェックボックス、プルダウンはonChange、それ以外はonBlurとす）\n\t\t// 個別に指定したい場合は data-validon-on が優先になる。\n\t\tif(validon.eachfire) {\n\t\t\tvar elems = validon.form.querySelectorAll('[name]')\n\t\t\tfor(var i=0; i<elems.length; i++) {\n\t\t\t\tif(elems[i].getAttribute('data-validon-on')) continue\n\t\t\t\tif(elems[i].type==='radio' || elems[i].type==='checkbox' || elems[i].tagName==='SELECT') {\n\t\t\t\t\telems[i].setAttribute('data-validon-on', 'change')\n\t\t\t\t} else {\n\t\t\t\t\telems[i].setAttribute('data-validon-on', 'blur')\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// 個別イベント登録\n\t\tvar elems = validon.form.querySelectorAll('[data-validon-on]')\n\t\tfor(var i=0; i<elems.length; i++) {\n\t\t\tvar elem = elems[i]\n\t\t\tvar eventName = elem.getAttribute('data-validon-on')\n\t\t\tif (elem.addEventListener) {\n\t\t\t\telem.addEventListener(eventName, function(e){ validon.send(this.name) }, false)\n\t\t\t} else if (elem.attachEvent) {\n\t\t\t\telem.attachEvent('on'+eventName, function(e){ validon.send(e.srcElement.name) })\n\t\t\t}\n\t\t}\n\t};\n\twindow.onload = function () { windowOnload(); };\n}\n\n/**\n * メソッド\n */\nValidon.prototype = {\n\n\t/**\n\t * PHPにデータを送信してバリデート実行\n\t *\n\t * - 引数空ならsubmit実行（全要素をバリデート対象にする\n\t * - 引数に文字列が入っている場合はnameとしてバリデート対象にする\n\t * - 引数に複数の文字列が配列で入っている場合は複数のnameとしてバリデート対象にする\n\t */\n\tsend: function(elems, callback){\n\t\tvar validon = this\n\t\tvar json = {\n\t\t\tconfig: this.config\n\t\t};\n\n\t\t// フック：startFunc\n\t\tif(validon.startFunc && 'function' === typeof validon.startFunc) {\n\t\t\tif(false === validon.startFunc(json)) return false\n\t\t}\n\n\t\t// 値まとめ\n\t\tjson.params = []\n\t\tvar params = {}\n\t\tvar elements = validon.form.querySelectorAll('[name]')\n\t\tfor(var i=0; i<elements.length; i++) {\n\t\t\tvar name = elements[i].getAttribute('name')\n\t\t\tif('undefined'!==typeof params[name]) continue\n\t\t\tif(elements[i].type==='radio') {\n\t\t\t\tvar lump = validon.form.querySelectorAll('[name=\"'+name+'\"]')\n\t\t\t\tfor(i=0; i<lump.length; i++) {\n\t\t\t\t\tif(lump[i].checked) {\n\t\t\t\t\t\tparams[name] = lump[i].value\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if(elements[i].type==='checkbox') {\n\t\t\t\tvar lump = validon.form.querySelectorAll('[name=\"'+name+'\"]')\n\t\t\t\tparams[name] = []\n\t\t\t\tfor(i=0; i<lump.length; i++) {\n\t\t\t\t\tif(lump[i].checked) {\n\t\t\t\t\t\tparams[name].push(lump[i].value)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if(elements[i].tagName==='SELECT') {\n\t\t\t\tvar lump = validon.form.querySelectorAll('[name=\"'+name+'\"] option')\n\t\t\t\tparams[name] = []\n\t\t\t\tfor(i=0; i<lump.length; i++) {\n\t\t\t\t\tif(lump[i].selected) {\n\t\t\t\t\t\tparams[name].push(lump[i].value)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tparams[name] = elements[i].value\n\t\t\t}\n\t\t}\n\t\tjson.params = params\n\n\t\t// 対象要素まとめ\n\t\tjson.targets = []\n\t\tjson.isSubmit = false\n\t\tif(typeof elems ==='undefined') {\n\t\t\t// submitバリデートの場合全ての値\n\t\t\tjson.isSubmit = true\n\t\t\tjson.targets = Object.keys(json.params)\n\t\t} else if(typeof elems ==='string') {\n\t\t\t// 個別バリデート：単体の場合（要素ごとのバリデート発火など）\n\t\t\tjson.targets.push(elems)\n\t\t} else if(elems instanceof Array) {\n\t\t\t// 個別バリデート：複数の場合（直接jsからvalidate()実行など）\n\t\t\tfor(var i=0; i<elems.length; i++) {\n\t\t\t\tjson.targets.push(elems[i])\n\t\t\t}\n\t\t}\n\n\t\t// フック：beforeFunc\n\t\tif(validon.beforeFunc && 'function' === typeof validon.beforeFunc) {\n\t\t\tif(false === validon.beforeFunc(json)) return false\n\t\t}\n\n\t\t// Ajax\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.onreadystatechange = function()\n\t\t{\n\t\t\tif(4 === this.readyState && 200 === this.status) {\n\t\t\t\tjson = this.response\n\t\t\t\tif('undefined' === typeof this.response) {\n\t\t\t\t\tjson = JSON.parse(this.responseText)\n\t\t\t\t}\n\n\t\t\t\t// フック：afterFunc\n\t\t\t\tif(validon.afterFunc && 'function' === typeof validon.afterFunc) {\n\t\t\t\t\tif(false === validon.afterFunc(json)) return false\n\t\t\t\t}\n\n\t\t\t\t// ターゲットのみ値の変更があれば反映する\n\t\t\t\tif(json.changes && json.changes.length) {\n\t\t\t\t\tfor(var i=0; i<json.changes.length; i++) {\n\t\t\t\t\t\tvar name = json.changes[i]\n\t\t\t\t\t\tvar elem = validon.form.querySelector('[name=\"'+name+'\"]')\n\t\t\t\t\t\tif(\n\t\t\t\t\t\t\t'INPUT' === elem.tagName &&\n\t\t\t\t\t\t\t('checkdradiobox' === elem.getAttribute('type') || 'checkbox' === elem.getAttribute('type'))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tvar elems = validon.form.querySelectorAll('[name=\"'+name+'\"]')\n\t\t\t\t\t\t\tfor(var j=0; j<elems.length; j++) {\n\t\t\t\t\t\t\t\telems[j].checked = -1 !== json.params[name].indexOf(elems[j].value)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if('SELECT' === elem.tagName) {\n\t\t\t\t\t\t\tvar options = elem.querySelectorAll('option')\n\t\t\t\t\t\t\tfor(var j=0; j<options.length; j++) {\n\t\t\t\t\t\t\t\toptions[j].selected = -1 !== json.params[name].indexOf(options[j].value)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telem.value = json.params[name]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// ターゲットのみエラーがあれば反映する\n\t\t\t\tif(json.targets && json.targets.length) {\n\t\t\t\t\tfor(var i=0; i<json.targets.length; i++) {\n\t\t\t\t\t\tvar name = json.targets[i]\n\t\t\t\t\t\tvar elem = validon.form.querySelector('[name=\"'+name+'\"]')\n\t\t\t\t\t\tvar errorholder = validon.form.querySelectorAll('[data-validon-errorholder=\"'+name+'\"]')\n\t\t\t\t\t\tif(!errorholder.length) {\n\t\t\t\t\t\t\tvar parent = elem.parentNode\n\t\t\t\t\t\t\twhile (parent.tagName !== validon.errorgroup.toUpperCase()) {\n\t\t\t\t\t\t\t\tparent = parent.parentNode;\n\t\t\t\t\t\t\t\tif('undefined' === typeof parent.tagName) {\n\t\t\t\t\t\t\t\t\tparent = elem.parentNode\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\terrorholder = document.createElement('div')\n\t\t\t\t\t\t\terrorholder.setAttribute('data-validon-errorholder', name)\n\t\t\t\t\t\t\tif(validon.errorposition === 'append') {\n\t\t\t\t\t\t\t\tparent.appendChild(errorholder)\n\t\t\t\t\t\t\t} else if(validon.errorposition === 'prepend') {\n\t\t\t\t\t\t\t\tparent.insertBefore(errorholder, parent.childNodes[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\terrorholder = new Array(errorholder)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar message = ''\n\t\t\t\t\t\tif(json.errors && 'undefined' !== typeof json.errors[name]) {\n\t\t\t\t\t\t\tmessage = validon.errortag.replace(/\\$message/, json.errors[name])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(var j=0; j<errorholder.length; j++) {\n\t\t\t\t\t\t\terrorholder[j].innerHTML = message\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 第二引数に関数が指定されていたらここで実行\n\t\t\t\tif(callback && 'function' === typeof callback) {\n\t\t\t\t\tcallback(json)\n\t\t\t\t}\n\n\t\t\t\t// フック：finsihFunc\n\t\t\t\tif(validon.finishFunc && 'function' === typeof validon.finishFunc) {\n\t\t\t\t\tif(false === validon.finishFunc(json)) return false\n\t\t\t\t}\n\n\t\t\t\t// エラーが一つも無ければsubmitする（isSubmit時のみ）\n\t\t\t\tif(!json.errors && json.isSubmit) validon.form.submit()\n\t\t\t}\n\t\t}\n\t\txhr.open('POST', validon.urlPath+'validon.php')\n\t\txhr.setRequestHeader('Content-Type', 'application/json')\n\t\txhr.responseType = 'json'\n\t\txhr.send(JSON.stringify(json))\n\n\t\treturn this\n\t}\n}\n\n/**\n * Object.keys Polyfill\n * http://tokenposts.blogspot.com/2012/04/javascript-objectkeys-browser.html\n */\nif (!Object.keys) Object.keys = function(o) {\n\tif (o !== Object(o))\n\t\tthrow new TypeError('Object.keys called on a non-object');\n\tvar k=[],p;\n\tfor (p in o) if (Object.prototype.hasOwnProperty.call(o,p)) k.push(p);\n\treturn k;\n}\n\n/**\n * Array.indexOf Polyfill\n * https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf#Polyfill\n */\nif (!Array.prototype.indexOf) Array.prototype.indexOf = (function (Object, max, min) {\n\t\"use strict\";\n\treturn function indexOf(member, fromIndex) {\n\t\tif (this === null || this === undefined) throw TypeError(\"Array.prototype.indexOf called on null or undefined\");\n\n\t\tvar that = Object(this), Len = that.length >>> 0, i = min(fromIndex | 0, Len);\n\t\tif (i < 0) i = max(0, Len + i); else if (i >= Len) return -1;\n\n\t\tif (member === void 0) {\n\t\t\tfor (; i !== Len; ++i) if (that[i] === void 0 && i in that) return i; // undefined\n\t\t} else if (member !== member) {\n\t\t\tfor (; i !== Len; ++i) if (that[i] !== that[i]) return i; // NaN\n\t\t} else for (; i !== Len; ++i) if (that[i] === member) return i; // all else\n\n\t\treturn -1; // if the value was not found, then return -1\n\t};\n})(Object, Math.max, Math.min);\n"]}